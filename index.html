<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4QYBNMVWWR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4QYBNMVWWR');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ageint Security Support Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFFFF;
        }
        .splash-fade-out {
            opacity: 0;
            transition: opacity 1s ease-out;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
        }
        .fade-out-fast {
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
        }
        .scale-in {
            opacity: 0;
            animation: scaleIn 0.8s ease-out forwards;
        }
        .view-transition {
            transition: opacity 0.3s ease-in-out;
        }
        /* Tutorial Styles */
        .tutorial-step-card {
            background-color: #f9fafb; /* gray-50 */
            border: 1px solid #e5e7eb; /* gray-200 */
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1.5rem; /* p-6 */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
        }
        .tutorial-highlight {
            background-color: #dbeafe; /* blue-100 */
            color: #1e40af; /* blue-800 */
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 600; /* font-semibold */
        }
    </style>
</head>
<body class="bg-white min-h-screen">

    <!-- Header -->
    <header class="fixed top-4 left-1/2 -translate-x-1/2 z-10 w-full max-w-sm">
        <div class="relative bg-white/80 backdrop-blur-md shadow-lg rounded-full px-6 py-2 flex items-center justify-center">
            <h2 class="text-xl font-semibold text-gray-700">Ageint Security</h2>
            <button id="infoBtn" class="absolute right-3 top-1/2 -translate-y-1/2 p-2">
                <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/info.png" alt="Info" class="h-6 w-6">
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <div class="min-h-screen flex items-center justify-center p-4 pt-24 pb-16">
        <main class="w-full max-w-3xl bg-white rounded-2xl shadow-lg p-6 sm:p-8 text-gray-800 border border-gray-200/80 relative transition-opacity duration-300 opacity-0">
            
            <!-- Choice View -->
            <div id="choiceView" class="hidden text-center">
                <div id="firmwareAlert" role="alert" class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-4 rounded-r-lg mb-8 text-left relative shadow-md" style="z-index: 1000;">
                    <button id="closeFirmwareAlert" aria-label="Close firmware update notification" class="absolute top-2 right-2 text-yellow-600 hover:text-yellow-800">
                        <svg class="fill-current h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
                    </button>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="py-1"><svg class="fill-current h-6 w-6 text-yellow-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM9 5v6h2V5H9zm0 8v2h2v-2H9z"/></svg></div>
                            <div class="pr-5">
                                <p class="font-bold">Important Firmware Update Required</p>
                                <p class="text-sm">For systems installed between <strong>9/1/2025</strong> and <strong>11/7/2025</strong>.</p>
                                <p class="text-sm mt-1">This ensures your system remains secure and functional.</p>
                            </div>
                        </div>
                        <button id="firmwareGoBtn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg ml-3 flex-shrink-0">Go!</button>
                    </div>
                </div>

                <h1 class="text-3xl font-bold mb-4 text-center">How can we help you today?</h1>
                <p class="text-center mb-6 text-gray-700 text-lg font-semibold">Please select an option below to get started.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-lg mx-auto">
                    <button id="selfServiceBtn" aria-describedby="selfTroubleshootingDesc" class="bg-green-500 hover:bg-green-600 text-white font-bold py-6 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-lg">
                        <div>
                            <span>Self-Service Guides</span>
                            <p id="selfTroubleshootingDesc" class="text-sm font-normal mt-1">Fix common issues yourself.</p>
                        </div>
                    </button>
                    <button id="remoteSupportBtn" aria-describedby="remoteSupportDesc" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-6 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-lg">
                        <div>
                            <span>Prepare for Remote Support</span>
                            <p id="remoteSupportDesc" class="text-sm font-normal mt-1">Get ready for your appointment.</p>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Self Service View -->
            <div id="selfServiceView" class="hidden view-transition">
                <div class="text-center">
                    <h1 class="text-4xl font-extrabold mb-2 text-gray-800">Self-Service Guide</h1>
                    <p class="text-gray-600 mb-6 text-base">Use this page to troubleshoot your Agent Security systems.</p>
                    
                    <div class="bg-gray-50 border border-gray-200 rounded-lg p-3 mb-6 flex items-center justify-center gap-2 text-sm text-gray-600">
                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/info.png" alt="Info" class="h-5 w-5">
                        <span>This section is a work in progress and will be updated over time.</span>
                    </div>

                    <div class="bg-blue-50 border border-blue-200 text-blue-800 rounded-lg p-4 mb-8 shadow-sm">
                        <p class="font-semibold text-lg">What system are you having trouble with?</p>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Camera System Option -->
                    <div class="bg-gray-50 p-6 rounded-lg border transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <h2 class="text-2xl font-bold mb-3 text-gray-800">Camera System</h2>
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <div class="flex-1">
                                <p class="text-gray-700 font-semibold mb-4">These guides are for camera systems installed by Ageint Security. If your system is different, these steps may not apply.</p>
                                <button id="troubleshootCameraBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-md text-base transition-all duration-300 transform hover:scale-105">Troubleshoot Camera System</button>
                            </div>
                            <div class="w-32 mx-auto md:w-1/3 md:mx-0">
                                <img src="https://www.alldataresource.com/assets/dahua_technology/Dahua-Technology-C845E42A-Miscellaneous-Main.png" alt="Ageint Security Camera System" class="rounded-md border-2 border-gray-200 shadow-sm">
                            </div>
                        </div>
                    </div>

                    <!-- Alarm System Option -->
                    <div class="bg-gray-50 p-6 rounded-lg border transition-all duration-300 hover:shadow-xl hover:-translate-y-1">
                        <h2 class="text-2xl font-bold mb-3 text-gray-800">Alarm System</h2>
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <div class="flex-1">
                                <p class="text-gray-700 font-semibold mb-4">This guide is for the <span class="font-bold">IQ Panel 4</span>. If your panel looks different, this guide may not be for you.</p>
                                <button id="troubleshootAlarmBtn" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-4 rounded-lg shadow-md text-base transition-all duration-300 transform hover:scale-105">Troubleshoot Alarm System</button>
                            </div>
                            <div class="w-32 mx-auto md:w-1/3 md:mx-0">
                                <img src="https://suretyhome.com/wp-content/uploads/bundle-01-iqp4.png" alt="IQ Panel 4" class="rounded-md border-2 border-gray-200 shadow-sm">
                            </div>
                        </div>
                    </div>
                </div>
                <button id="selfServiceBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    <span>Back</span>
                </button>
            </div>

            <!-- Camera Troubleshooting View -->
            <div id="cameraTroubleshootingView" class="hidden view-transition">
                <h1 class="text-3xl font-bold mb-4 text-center">Camera System Troubleshooting</h1>
                <div class="relative mb-6">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                        <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none">
                            <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </span>
                    <input type="text" id="cameraSearch" class="w-full py-2 pl-10 pr-4 text-gray-700 bg-white border rounded-lg focus:outline-none focus:ring focus:ring-opacity-40 focus:ring-blue-300" placeholder="Search camera guides...">
                </div>
                <p class="text-center mb-6 text-gray-700 text-lg font-semibold">Please select a category below.</p>
                
                <!-- Tabs -->
                <div class="mb-4 border-b border-gray-200">
                    <ul class="flex flex-wrap -mb-px text-sm font-medium text-center" id="cameraTabs" role="tablist">
                        <li class="mr-2" role="presentation">
                            <button class="inline-flex items-center justify-center p-4 border-b-2 rounded-t-lg border-blue-500 text-blue-600" id="app-tab" data-tabs-target="#app-content" type="button" role="tab" aria-controls="app-content" aria-selected="true">
                                <img src="https://is1-ssl.mzstatic.com/image/thumb/Purple221/v4/f8/09/23/f8092338-4412-cba9-cd48-53a749670589/AppIcon-0-0-1x_U007emarketing-0-6-0-0-sRGB-85-220.png/400x400ia-75.webp" alt="App Logo" class="w-6 h-6 mr-2 rounded-md">
                                APP
                            </button>
                        </li>
                        <li class="mr-2" role="presentation">
                            <button class="inline-flex items-center justify-center p-4 border-b-2 rounded-t-lg" id="system-tab" data-tabs-target="#system-content" type="button" role="tab" aria-controls="system-content" aria-selected="false">
                                <img src="https://www.dahuasecurity.com/asset/upload/uploads/image/20211227/IPC1.jpg" alt="Camera System Logo" class="w-6 h-6 mr-2 rounded-md">
                                CAMERA SYSTEM
                            </button>
                        </li>
                    </ul>
                </div>

                <!-- Tab Content -->
                <div id="cameraTabContent">
                    <div class="p-4 rounded-lg bg-gray-50" id="app-content" role="tabpanel" aria-labelledby="app-tab">
                        <button id="dmssTutorialBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-lg shadow-md text-lg transition-all duration-300 transform hover:scale-105 text-left">
                            üì± Setting Up DMSS on Another Phone
                        </button>
                        <button id="nvrTutorialBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-lg shadow-md text-lg transition-all duration-300 transform hover:scale-105 text-left mt-4">
                            üñ•Ô∏è Connecting Your NVR to the DMSS App
                        </button>
                    </div>
                    <div class="hidden p-4 rounded-lg bg-gray-50" id="system-content" role="tabpanel" aria-labelledby="system-tab">
                        <button id="nvrTutorialSystemBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-lg shadow-md text-lg transition-all duration-300 transform hover:scale-105 text-left">
                            üñ•Ô∏è Connecting Your NVR to the DMSS App
                        </button>
                        <button id="routerFirmwareBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-lg shadow-md text-lg transition-all duration-300 transform hover:scale-105 text-left mt-4">
                            üåê Upgrading Router Firmware
                        </button>
                    </div>
                </div>

                <button id="cameraTroubleshootingBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    <span>Back to Self-Service</span>
                </button>
            </div>

            <!-- Alarm Troubleshooting View -->
            <div id="alarmTroubleshootingView" class="hidden view-transition">
                <h1 class="text-3xl font-bold mb-4 text-center">Alarm System Troubleshooting</h1>
                <div class="relative mb-6">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                        <svg class="w-5 h-5 text-gray-400" viewBox="0 0 24 24" fill="none">
                            <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </span>
                    <input type="text" id="alarmSearch" class="w-full py-2 pl-10 pr-4 text-gray-700 bg-white border rounded-lg focus:outline-none focus:ring focus:ring-opacity-40 focus:ring-blue-300" placeholder="Search alarm guides...">
                </div>
                <div id="alarmGuidesContainer" class="p-4 rounded-lg bg-gray-50 text-center">
                    <button id="batteryTutorialBtn" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-4 px-4 rounded-lg shadow-md text-lg transition-all duration-300 transform hover:scale-105 text-left">
                        üîã How to Change Batteries in Your Door/Window Sensor
                    </button>
                </div>
                <button id="alarmTroubleshootingBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    <span>Back to Self-Service</span>
                </button>
            </div>

            <!-- Battery Tutorial View -->
            <div id="batteryTutorialView" class="hidden view-transition">
                <h1 class="text-3xl font-bold mb-4 text-center">Change Door/Window Sensor Battery</h1>
                
                <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-4 rounded-r-lg mb-6 shadow-md">
                    <p class="font-bold">Battery Type:</p>
                    <p>These sensors typically use a <span class="font-semibold">CR123A</span> battery. Please verify with your technician before purchasing.</p>
                </div>
                
                <div class="space-y-8">
                    <!-- Step 1: Disarm Panel -->
                    <div class="tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 1: Disarm the Panel</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Disarm your alarm system to ensure safety.</p>
                        <div class="mt-8 flex justify-end">
                            <button class="next-btn-battery bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 2 -->
                    <div class="battery-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 2: Identify the Sensor</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Locate the door or window sensor that needs a battery change. It will be the larger piece of the two-part sensor.</p>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-battery bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-battery bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 3 -->
                    <div class="battery-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 3: Get Replacement Batteries</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Most sensors use a <strong class="tutorial-highlight">CR2032</strong> or <strong class="tutorial-highlight">CR2450</strong> battery. Check the old battery to be sure.</p>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-battery bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-battery bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 4 -->
                    <div class="battery-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 4: Open the Sensor</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">There is usually a small tab or slot on the side of the sensor. Use a small flathead screwdriver or your fingernail to pry the cover off.</p>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-battery bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-battery bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 5 -->
                    <div class="battery-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 5: Replace the Batteries</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Remove the old battery and insert the new one, making sure the <strong class="tutorial-highlight">+</strong> side is facing up.</p>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-battery bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-battery bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 6 -->
                    <div class="battery-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 6: Close the Sensor</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Snap the cover back into place.</p>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-battery bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-battery bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 7 -->
                    <div class="battery-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 7: Test the Sensor</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Open and close the door or window to ensure the alarm panel recognizes that the sensor is working correctly.</p>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-battery bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button id="batteryFinishedBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg text-base">All Done!</button>
                        </div>
                    </div>
                </div>

                <button id="batteryTutorialBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    <span>Back to Alarm Troubleshooting</span>
                </button>
            </div>

            <!-- DMSS Tutorial View -->
            <div id="dmssTutorialView" class="hidden view-transition">
                <h1 class="text-3xl font-bold mb-4 text-center">üì± Setting Up DMSS on Another Phone</h1>
                <div id="dmssProgress" class="text-center font-bold text-lg text-gray-700 mb-6"></div>
                <div id="dmss-steps">
                    <!-- Step 1 -->
                    <div class="step">
                        <div class="flex items-start">
                            <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">1</div>
                            <div>
                                <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 1: Open the App</h3>
                                <p class="text-gray-700 font-semibold text-base mb-4">On your phone, open the DMSS app.</p>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-end">
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 2 -->
                    <div class="step hidden">
                        <div class="flex items-start">
                            <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">2</div>
                            <div>
                                <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 2: Add Device</h3>
                                <p class="text-gray-700 font-semibold text-base mb-4">Press the <span class="tutorial-highlight">+</span> icon in the top right corner, then select <span class="tutorial-highlight">SN/Scan</span>.</p>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 3 -->
                    <div class="step hidden">
                        <div class="flex items-start">
                            <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">3</div>
                            <div>
                                <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 3: Scan QR Code</h3>
                                <p class="text-gray-700 font-semibold text-base mb-4">On your monitor, navigate to <span class="tutorial-highlight">Main Menu > Network > P2P</span>. Scan the QR code on the right with your phone.</p>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 4 -->
                    <div class="step hidden">
                        <div class="flex items-start">
                            <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">4</div>
                            <div>
                                <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 4: Add to App</h3>
                                <p class="text-gray-700 font-semibold text-base mb-4">Press <span class="tutorial-highlight">Next</span>. Select <span class="tutorial-highlight">NVR</span>, then fill in the device name and password. Press the save icon.</p>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 5 -->
                    <div class="step hidden">
                        <div class="flex items-start">
                            <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">5</div>
                            <div>
                                <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 5: Finished</h3>
                                <p class="text-gray-700 font-semibold text-base mb-4">The device has been added to your app.</p>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-start">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                        </div>
                    </div>
                </div>

                <button id="dmssTutorialBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    <span>Back to Camera Troubleshooting</span>
                </button>
            </div>

            <!-- NVR Tutorial View -->
            <div id="nvrTutorialView" class="hidden view-transition">
                <div class="text-center mb-8">
                    <h1 class="text-3xl font-bold mb-2">üñ•Ô∏è Connecting Your NVR to the DMSS App</h1>
                    <p class="text-gray-700 text-lg font-semibold">Follow these steps to link your NVR to the mobile app.</p>
                </div>

                <div class="text-center mb-6">
                    <button id="monitorToggleBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg border border-gray-300 shadow-sm transition-all duration-300">I don't have a monitor</button>
                </div>

                <div id="nvrWithMonitor">
                    <!-- Progress Bar -->
                    <div class="mb-8">
                        <div class="relative pt-1">
                            <div class="flex mb-2 items-center justify-between">
                                <div>
                                    <span id="nvrProgressLabel" class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200"></span>
                                </div>
                            </div>
                            <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200">
                                <div id="nvrProgressBar" style="width: 0%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 transition-all duration-500"></div>
                            </div>
                        </div>
                    </div>

                    <div id="nvr-steps">
                        <!-- Step 1 -->
                        <div class="step tutorial-step-card">
                            <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 1: Connect Monitor to NVR</h3>
                            <p class="text-gray-700 font-semibold text-base mb-4">A monitor must be connected to configure settings.</p>
                            <div class="mt-8 flex justify-end">
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 2 -->
                        <div class="step hidden tutorial-step-card">
                            <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 2: Access NVR Main Menu</h3>
                            <p class="text-gray-700 font-semibold text-base mb-4">Right-click on the monitor, select <strong class="tutorial-highlight">Main Menu</strong>, enter NVR passcode, press <strong class="tutorial-highlight">Network</strong>, then press <strong class="tutorial-highlight">P2P</strong> at the bottom left.</p>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 3 -->
                        <div class="step hidden tutorial-step-card">
                            <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 3: Open DMSS App</h3>
                            <p class="text-gray-700 font-semibold text-base mb-4">Launch the DMSS app on your phone.</p>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 4 -->
                        <div class="step hidden tutorial-step-card">
                            <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 4: Tap "+" to Add Device</h3>
                            <p class="text-gray-700 font-semibold text-base mb-4">Select <strong class="tutorial-highlight">"Manually Add"</strong> if needed.</p>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 5 -->
                        <div class="step hidden tutorial-step-card">
                            <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 5: Enter Serial Number</h3>
                            <p class="text-gray-700 font-semibold text-base mb-4">Input the NVR's SN (shown in P2P menu).</p>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 6 -->
                        <div class="step hidden tutorial-step-card">
                            <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 6: Fill Device Details</h3>
                            <p class="text-gray-700 font-semibold text-base mb-4">Name the device (e.g., "Home Cameras") and enter admin credentials.</p>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 7 -->
                        <div class="step hidden tutorial-step-card">
                            <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 7: Save & View</h3>
                            <p class="text-gray-700 font-semibold text-base mb-4">Confirm connection; live feeds should appear in DMSS.</p>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 8: Notes -->
                        <div class="step hidden tutorial-step-card">
                            <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 8: Notes</h3>
                            <ul class="space-y-3 text-gray-700 font-semibold text-base">
                                <li class="flex items-start"><span class="mr-3 text-2xl">üñ•Ô∏è</span><div>To exit the P2P menu on the monitor, just repeatedly right-click until it closes.</div></li>
                                <li class="flex items-start"><span class="mr-3 text-2xl">‚ùó</span><div>If no monitor is available, you can either:
                                    <ul class="list-disc list-inside pl-4 mt-2">
                                        <li>Connect one via HDMI, or</li>
                                        <li>Find the serial number on the bottom of the NVR and manually enter it in the DMSS app where you would normally scan the QR code.</li>
                                    </ul>
                                </div></li>
                            </ul>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button id="nvrFinishedBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg text-base">All Done!</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="nvrWithoutMonitor" class="hidden">
                    <div id="dmssWithoutMonitorProgress" class="text-center font-bold text-lg text-gray-700 mb-6"></div>
                     <div id="dmss-steps">
                        <!-- Step 1 -->
                        <div class="step">
                            <div class="flex items-start">
                                <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">1</div>
                                <div>
                                    <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 1: Open the App</h3>
                                    <p class="text-gray-700 font-semibold text-base mb-4">On your phone, open the DMSS app.</p>
                                </div>
                            </div>
                            <div class="mt-8 flex justify-end">
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 2 -->
                        <div class="step hidden">
                            <div class="flex items-start">
                                <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">2</div>
                                <div>
                                    <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 2: Add Device</h3>
                                    <p class="text-gray-700 font-semibold text-base mb-4">Press the <span class="tutorial-highlight">+</span> icon in the top right corner, then select <span class="tutorial-highlight">SN/Scan</span>.</p>
                                </div>
                            </div>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 3 -->
                        <div class="step hidden">
                            <div class="flex items-start">
                                <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">3</div>
                                <div>
                                    <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 3: Find Serial Number (SN)</h3>
                                    <p class="text-gray-700 font-semibold text-base mb-4">Locate the serial number (SN) on the sticker on the bottom of your main NVR box. Manually enter this into the app.</p>
                                </div>
                            </div>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 4 -->
                        <div class="step hidden">
                            <div class="flex items-start">
                                <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">4</div>
                                <div>
                                    <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 4: Add to App</h3>
                                    <p class="text-gray-700 font-semibold text-base mb-4">Press <span class="tutorial-highlight">Next</span>. Select <span class="tutorial-highlight">NVR</span>, then fill in the device name and password. Press the save icon.</p>
                                </div>
                            </div>
                            <div class="mt-8 flex justify-between">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                                <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                            </div>
                        </div>
                        <!-- Step 5 -->
                        <div class="step hidden">
                             <div class="flex items-start">
                                <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">5</div>
                                <div>
                                    <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 5: Finished</h3>
                                    <p class="text-gray-700 font-semibold text-base mb-4">The device has been added to your app.</p>
                                </div>
                            </div>
                            <div class="mt-8 flex justify-start">
                                <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="nvrTutorialBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    <span>Back to Camera Troubleshooting</span>
                </button>
            </div>

            <!-- Router Firmware Tutorial View -->
            <div id="routerFirmwareView" class="hidden view-transition">
                <div class="text-center mb-8">
                    <h1 class="text-3xl font-bold mb-2">Upgrading Router Firmware</h1>
                    <p class="text-gray-700 text-lg font-semibold">Follow these steps to update your router.</p>
                </div>
                
                <!-- Progress Bar -->
                <div class="mb-8">
                    <div class="relative pt-1">
                        <div class="flex mb-2 items-center justify-between">
                            <div>
                                <span id="routerFirmwareProgressLabel" class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200">
                                    Step 1 of 8
                                </span>
                            </div>
                        </div>
                        <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200">
                            <div id="routerFirmwareProgressBar" style="width: 12.5%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500 transition-all duration-500"></div>
                        </div>
                    </div>
                </div>

                <div id="router-firmware-steps">
                    <!-- Step 1 -->
                    <div class="router-firmware-step tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 1: Connect to Wi-Fi</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">On your phone, open Wi-Fi settings and connect to <strong class="tutorial-highlight">'Ageint Data 5'</strong>. You will need the password. If you don't have it, please contact our office at <strong class="tutorial-highlight">832-610-6820</strong>.</p>
                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/step1.PNG" alt="Step 1" class="max-w-xs mx-auto rounded-lg shadow-md border">
                        <div class="mt-8 flex justify-end">
                            <button class="next-btn-router bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 2 -->
                    <div class="router-firmware-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 2: Access Login Page</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Open a web browser and go to <strong class="tutorial-highlight">192.168.2.1</strong>. Enter the same password you used for the Wi-Fi.</p>
                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/step2.PNG" alt="Step 2" class="max-w-xs mx-auto rounded-lg shadow-md border">
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-router bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-router bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 3 -->
                    <div class="router-firmware-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 3: Open Main Menu</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Tap the menu icon (three lines) at the top right. A pop-up might appear; if it does, tap the 'X' to close it.</p>
                        <div class="flex flex-col md:flex-row gap-4 justify-center">
                            <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/step3.PNG" alt="Step 3 Main" class="max-w-xs mx-auto rounded-lg shadow-md border">
                            <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/step%203-disclaimer.PNG" alt="Step 3 Popup" class="max-w-xs mx-auto rounded-lg shadow-md border">
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-router bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-router bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 4 -->
                    <div class="router-firmware-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 4: Select 'Advanced'</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">From the menu, select the <strong class="tutorial-highlight">'Advanced'</strong> option.</p>
                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/step4.PNG" alt="Step 4" class="max-w-xs mx-auto rounded-lg shadow-md border">
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-router bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-router bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 5 -->
                    <div class="router-firmware-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 5: Select 'System'</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">In the Advanced menu, scroll down and tap on <strong class="tutorial-highlight">'System'</strong>.</p>
                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/step5.PNG" alt="Step 5" class="max-w-xs mx-auto rounded-lg shadow-md border">
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-router bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-router bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 6 -->
                    <div class="router-firmware-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 6: Select 'Firmware Update'</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Next, select <strong class="tutorial-highlight">'Firmware Update'</strong> from the System menu.</p>
                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/step6.PNG" alt="Step 6" class="max-w-xs mx-auto rounded-lg shadow-md border">
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-router bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-router bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 7 -->
                    <div class="router-firmware-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 7: Go to Update Section</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">You will now be on the Firmware Update screen. Please scroll down to see the update options.</p>
                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/step7.PNG" alt="Step 7" class="max-w-xs mx-auto rounded-lg shadow-md border">
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-router bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-router bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 8 -->
                    <div class="router-firmware-step hidden tutorial-step-card">
                        <h3 class="font-bold text-2xl mb-4 text-gray-800">Step 8: Update and Reboot</h3>
                        <p class="text-gray-700 font-semibold text-base mb-4">Look for a blue button labeled <strong class="tutorial-highlight">'UPDATE'</strong>. If your router is already up to date, it may say 'Check for update' instead. Press this button to confirm. The router will begin its update process. Please keep this screen open until it has finished rebooting. Once complete, you can reconnect your phone to your main Wi-Fi network.</p>
                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/ste8.PNG" alt="Step 8" class="max-w-xs mx-auto rounded-lg shadow-md border">
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-router bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button id="routerFirmwareFinishedBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg text-base">All Done!</button>
                        </div>
                    </div>
                </div>
                <button id="routerFirmwareBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    <span>Back to Camera Troubleshooting</span>
                </button>
            </div>

            <!-- Welcome View -->
            <div id="welcomeView" class="hidden view-transition">
                <div class="text-center">
                    <h1 class="text-2xl font-bold mb-4">Welcome to Your Support Portal</h1>
                    <div class="bg-blue-50 border border-blue-200 text-blue-800 rounded-lg p-4 mb-6 shadow-sm">
                        <p class="font-semibold text-base">This short guide will help you prepare for your remote support session so we can resolve your issue quickly.</p>
                    </div>
                    <p class="font-semibold mb-4 text-lg">Select the system you need help with:</p>

                    <div class="space-y-4">
                        <button id="cameraBtn" class="w-full flex items-center justify-center gap-3 bg-white hover:bg-blue-500 text-blue-500 hover:text-white border-2 border-blue-500 font-bold py-4 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-lg">
                            <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/camera.png" alt="Camera System" class="h-8 w-8">
                            <span>Camera System</span>
                        </button>
                        <button id="accessBtn" class="w-full flex items-center justify-center gap-3 bg-white hover:bg-yellow-500 text-yellow-500 hover:text-white border-2 border-yellow-500 font-bold py-4 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-lg">
                            <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/access.png" alt="Access Control" class="h-8 w-8">
                            <span>Access Control</span>
                        </button>
                        <button id="alarmBtn" class="w-full flex items-center justify-center gap-3 bg-white hover:bg-purple-500 text-purple-500 hover:text-white border-2 border-purple-500 font-bold py-4 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-lg">
                            <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/alarm.png" alt="Alarm System" class="h-8 w-8">
                            <span>Alarm System</span>
                        </button>
                        <div class="mt-8 text-center">
                            <p class="text-sm text-gray-600 mb-2">Have questions about your system? We can help you answer them.</p>
                            <button id="trainingBtn" class="w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-500 text-gray-500 hover:text-white border-2 border-gray-500 font-bold py-3 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-base">
                                <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/icons8-information-64.png" alt="Information" class="h-6 w-6">
                                <span>Get to know your system</span>
                            </button>
                        </div>
                    </div>
                </div>
                <button id="welcomeBackBtn" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>
                    <span>Return to Main Menu</span>
                </button>
            </div>

            <!-- Camera System View -->
            <div id="cameraView" class="hidden view-transition">
                <h1 class="text-3xl font-bold mb-4">Camera System Preparation</h1>
                <p class="mb-8 text-gray-700 text-lg font-semibold">Please follow these steps one by one to ensure your support session is as smooth as possible.</p>
                <div id="cameraProgress" class="text-center font-bold text-lg text-gray-700 mb-6"></div>
                <div id="camera-steps">
                    <!-- Step 1: SN -->
                    <div id="cameraStep1" class="step">
                        <div class="flex items-start">
                            <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">1</div>
                            <div>
                                <h3 class="font-semibold text-xl">Locate Serial Number (SN)</h3>
                                <p class="text-gray-700 font-semibold text-base mt-2">Find the serial number (SN) on the bottom of your main camera box (NVR). Once you have it, please text the SN and your name to us.</p>
                                <button id="findOnPhoneBtn" class="inline-flex items-center gap-1 text-base text-blue-600 hover:underline mt-2 font-semibold">
                                    <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/info.png" alt="Info" class="h-5 w-5">
                                    <span>Can I find it on my phone?</span>
                                </button>
                                <p class="text-center bg-gray-100 p-2 rounded-lg mt-4 font-bold text-gray-800 text-lg">
                                    <span class="phone-number" data-number="8326106820">832-610-6820</span>
                                    <button class="phone-action-btn inline-flex align-middle ml-2" data-text-only="true">
                                        <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/speechbubble.png" alt="Text us" class="h-6 w-6">
                                    </button>
                                </p>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-end">
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>

                    <!-- Step 2: Locate Hub -->
                    <div id="cameraStep2" class="step hidden">
                        <div class="flex items-start">
                            <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">2</div>
                            <div>
                                <h3 class="font-semibold text-xl">Locate Main Hub</h3>
                                <p class="text-gray-700 font-semibold text-base mt-2">Please locate the main box for your camera system (often called the NVR or DVR).</p>
                            </div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    
                    <!-- Step 3: Power Source -->
                    <div id="cameraStep3" class="step hidden">
                        <div class="flex items-start">
                             <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">3</div>
                             <div>
                                 <h3 class="font-semibold text-xl">Find Power Source</h3>
                                 <p class="text-gray-700 font-semibold text-base mt-2">Find where the camera system plugs in. Is it a backup battery (UPS), a power strip, or the wall?</p>
                                 <button id="upsInfoBtn" class="inline-flex items-center gap-1 text-base text-blue-600 hover:underline mt-2 font-semibold">
                                     <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/info.png" alt="Info" class="h-5 w-5">
                                     <span>What does a backup battery look like?</span>
                                 </button>
                             </div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>

                    <!-- Step 4: Power Down -->
                    <div id="cameraStep4" class="step hidden">
                        <div class="flex items-start">
                            <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">4</div>
                            <div>
                                <h3 class="font-semibold text-xl">Power Down</h3>
                                <p class="text-gray-700 font-semibold text-base mt-2">Unplug everything from its power source, <span class="font-bold text-red-600">except</span> for the alarm power box (a white box with two wires).</p>
                                <button id="alarmBoxInfoBtn" class="inline-flex items-center gap-1 text-base text-blue-600 hover:underline mt-2 font-semibold">
                                    <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/info.png" alt="Info" class="h-5 w-5">
                                    <span>What does the alarm box look like?</span>
                                </button>
                            </div>
                        </div>
                        <div class="bg-red-100 border-l-4 border-red-500 text-red-800 p-4 rounded-r-lg my-4">
                            <h2 class="font-bold text-lg">Urgent Reminder</h2>
                            <p class="font-semibold text-base">The white alarm box must not lose power. Do not confuse it with a white box that has antennas.</p>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>

                    <!-- Step 5: Wait -->
                    <div id="cameraStep5" class="step hidden">
                        <div class="flex items-start">
                             <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">5</div>
                             <div>
                                 <h3 class="font-semibold text-xl">Wait 60 Seconds</h3>
                                 <p class="text-gray-700 font-semibold text-base mt-2">Wait a full minute for the system to shut down completely.</p>
                             </div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>

                    <!-- Step 6: Power On -->
                    <div id="cameraStep6" class="step hidden">
                        <div class="flex items-start">
                             <div class="step-number flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-500 text-white font-bold text-lg mr-4">6</div>
                             <div>
                                 <h3 class="font-semibold text-xl">Power On</h3>
                                 <p class="text-gray-700 font-semibold text-base mt-2">Plug the system back in.</p>
                             </div>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>

                    <!-- Step 7: Final Info -->
                    <div id="cameraStep7" class="camera-step hidden">
                         <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-800 p-4 rounded-r-lg">
                            <h2 class="font-bold text-lg">Highly Recommended</h2>
                            <p class="font-semibold text-base">Having a monitor/TV (with HDMI) and a computer mouse nearby will significantly speed up our call.</p>
                            <button id="monitorInfoBtn" class="text-base text-blue-600 hover:underline mt-2 font-semibold">Why is a monitor helpful?</button>
                        </div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button id="cameraFinishedBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg text-base">All Done!</button>
                        </div>
                    </div>
                </div>
                
                <button id="cameraBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 mt-8 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" /></svg>
                    <span>Back to Main Menu</span>
                </button>
           </div>

            <!-- Access Control View -->
            <div id="accessControlView" class="hidden view-transition">
                 <h1 class="text-3xl font-bold mb-4">Access Control Preparation</h1>
                 <p class="mb-4 text-gray-700 text-lg font-semibold">To identify your device, please look on the device itself (e.g., keypad, card reader, or garage door motor) for any of the following details:</p>
                 <ul class="list-disc list-inside space-y-2 mb-6 bg-gray-100 p-6 rounded-lg text-lg font-medium text-gray-800">
                     <li>Model Number / Name</li>
                     <li>Serial Number</li>
                     <li>Brand Name</li>
                 </ul>
                 <p class="mb-6 text-gray-700 font-semibold text-base">Don't worry if you can't find these. We'll assist you on the call.</p>
                 <button id="accessBackBtn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" /></svg>
                    <span>Back</span>
                 </button>
            </div>

            <!-- Alarm Hub View -->
            <div id="alarmHubView" class="hidden view-transition">
                <h1 class="text-3xl font-bold mb-4">Alarm System Preparation</h1>
                <p class="mb-6 text-gray-700 text-lg font-semibold">Please choose the option that best matches your problem. This will help us get to the core of the issue faster.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button id="panelIssuesBtn" class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-6 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-lg">General Panel Issues</button>
                    <button id="sensorIssuesBtn" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-6 px-4 rounded-lg shadow-md transition-all duration-300 transform hover:scale-105 hover:shadow-xl text-lg">Sensor Issues</button>
                </div>
                <button id="alarmHubBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 mt-8 flex items-center justify-center gap-2 text-base">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" /></svg>
                    <span>Back to Main Menu</span>
                </button>
            </div>

            <!-- Alarm - General Panel Issues View -->
            <div id="panelIssuesView" class="hidden view-transition">
                <h1 class="text-3xl font-bold mb-4">General Panel Issues</h1>
                <p class="mb-6 text-gray-700 text-lg font-semibold">For a blank screen, connection errors, or an unresponsive system, please follow these steps.</p>
                <div id="panelIssuesProgress" class="text-center font-bold text-lg text-gray-700 mb-6"></div>
                <div id="panel-issues-steps">
                    <!-- Step 1 -->
                    <div class="panel-issue-step">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-teal-500 text-white font-bold text-lg mr-4">1</div><div><h3 class="font-semibold text-xl">Send Account Name</h3><p class="text-gray-700 font-semibold text-base mt-1">Please text the full name on your Alarm.com account to the number below. This helps us pull up your information before the call.</p>
                            <p class="text-center bg-gray-100 p-2 rounded-lg mt-4 font-bold text-gray-800 text-lg">
                                <span class="phone-number" data-number="8326106820">832-610-6820</span>
                                <button class="phone-action-btn inline-flex align-middle ml-2" data-text-only="false">
                                    <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/speechbubble.png" alt="Text or Call" class="h-6 w-6">
                                </button>
                            </p>
                        </div></div>
                        <div class="mt-8 flex justify-end">
                            <button class="next-btn-panel bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 2 -->
                    <div class="panel-issue-step hidden">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-teal-500 text-white font-bold text-lg mr-4">2</div><div><h3 class="font-semibold text-xl">Go to the Panel</h3><p class="text-gray-700 font-semibold text-base mt-1">Go to your main IQ Panel 4 screen.</p></div></div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-panel bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-panel bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 3 -->
                    <div class="panel-issue-step hidden">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-teal-500 text-white font-bold text-lg mr-4">3</div><div><h3 class="font-semibold text-xl">Access Reboot Menu</h3><p class="text-gray-700 font-semibold text-base mt-1">Swipe down from the top. Tap <span class="font-bold">Settings</span>, then <span class="font-bold">Advanced Settings</span>.</p></div></div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-panel bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-panel bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 4 -->
                    <div class="panel-issue-step hidden">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-teal-500 text-white font-bold text-lg mr-4">4</div><div><h3 class="font-semibold text-xl">Enter Code</h3><p class="text-gray-700 font-semibold text-base mt-1">Enter your 4-digit master code.</p><p class="text-base text-gray-600 mt-2">If you don't know it, text us at <span class="font-bold phone-number" data-number="8326106820">832-610-6820</span><button class="phone-action-btn inline-flex align-middle ml-2">üìû</button> to get it before our call.</p></div></div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-panel bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-panel bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 5 -->
                    <div class="panel-issue-step hidden">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-teal-500 text-white font-bold text-lg mr-4">5</div><div><h3 class="font-semibold text-xl">Reboot Panel</h3><p class="text-gray-700 font-semibold text-base mt-1">Tap <span class="font-bold">Reboot Panel</span> and then <span class="font-bold">OK</span> to confirm.</p></div></div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-panel bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-panel bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 6 -->
                    <div class="panel-issue-step hidden">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-teal-500 text-white font-bold text-lg mr-4">6</div><div><h3 class="font-semibold text-xl">Wait 3 Minutes</h3><p class="text-gray-700 font-semibold text-base mt-1">Do not touch the panel while it restarts. It will show the home screen when ready.</p></div></div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-panel bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button id="panelFinishedBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg text-base">All Done!</button>
                        </div>
                    </div>
                </div>
                <button id="panelIssuesBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 text-base mt-8">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" /></svg>
                    <span>Back to Alarm Menu</span>
                </button>
            </div>

            <!-- Alarm - Sensor Issues View -->
            <div id="sensorIssuesView" class="hidden view-transition">
                <h1 class="text-3xl font-bold mb-4">Sensor Issues</h1>
                <p class="mb-6 text-gray-700 text-lg font-semibold">For "sensor open," "low battery," or "sensor tamper" errors, please follow these steps.</p>
                <div id="sensorIssuesProgress" class="text-center font-bold text-lg text-gray-700 mb-6"></div>
                <div id="sensor-issues-steps">
                    <!-- Step 1 -->
                    <div class="sensor-issue-step">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-indigo-500 text-white font-bold text-lg mr-4">1</div><div><h3 class="font-semibold text-xl">Send Account Name</h3><p class="text-gray-700 font-semibold text-base mt-1">Please text the full name on your Alarm.com account to the number below. This helps us pull up your information before the call.</p>
                            <p class="text-center bg-gray-100 p-2 rounded-lg mt-4 font-bold text-gray-800 text-lg">
                                <span class="phone-number" data-number="8326106820">832-610-6820</span>
                                <button class="phone-action-btn inline-flex align-middle ml-2" data-text-only="false">
                                    <img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/speechbubble.png" alt="Text or Call" class="h-6 w-6">
                                </button>
                            </p>
                        </div></div>
                        <div class="mt-8 flex justify-end">
                            <button class="next-btn-sensor bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 2 -->
                    <div class="sensor-issue-step hidden">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-indigo-500 text-white font-bold text-lg mr-4">2</div><div><h3 class="font-semibold text-xl">Locate the Sensor</h3><p class="text-gray-700 font-semibold text-base mt-1">Find the exact sensor causing the problem (e.g., "Front Door").</p></div></div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-sensor bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-sensor bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 3 -->
                    <div class="sensor-issue-step hidden">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-indigo-500 text-white font-bold text-lg mr-4">3</div><div><h3 class="font-semibold text-xl">Inspect the Sensor</h3><ul class="list-disc list-inside text-gray-700 space-y-2 mt-2 text-base font-semibold"><li><span class="font-bold">Doors/Windows:</span> Are the sensor and magnet aligned? Is the cover tight?</li><li><span class="font-bold">Motion Detectors:</span> Is anything blocking its view?</li></ul></div></div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-sensor bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button class="next-btn-sensor bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg text-base">Next</button>
                        </div>
                    </div>
                    <!-- Step 4 -->
                    <div class="sensor-issue-step hidden">
                        <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-indigo-500 text-white font-bold text-lg mr-4">4</div><div><h3 class="font-semibold text-xl">Test the Sensor</h3><p class="text-gray-700 font-semibold text-base mt-1">Open and close the problem door/window. Does the panel's status change?</p></div></div>
                        <div class="mt-8 flex justify-between">
                            <button class="prev-btn-sensor bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg text-base">Previous</button>
                            <button id="sensorFinishedBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg text-base">All Done!</button>
                        </div>
                    </div>
                </div>
                <button id="sensorIssuesBackBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 text-base mt-8">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" /></svg>
                    <span>Back to Alarm Menu</span>
                </button>
            </div>

        </main>
    </div>

    <footer class="text-center py-4">
        <div class="text-xs text-gray-500 font-light opacity-75">
            <p>Made by Levi McCarty at Ageint Security</p>
            <p class="mt-1">Icons by Icons8.com</p>
        </div>
    </footer>

    <!-- Modals -->
    <div id="infoModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-40 transition-opacity duration-300"><div class="bg-white rounded-2xl shadow-lg p-8 max-w-lg w-full text-gray-800 border relative transition-transform duration-300 transform scale-95"><button id="closeInfoModalBtn" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900 leading-none">&times;</button><h2 class="text-2xl font-bold mb-4">Work in Progress</h2><p class="text-gray-700 font-semibold text-base">This support portal is an actively developing project. We are continuously working to add more features and improve its functionality to better serve you.</p><p class="text-gray-700 font-semibold mt-2 text-base">Thank you for your understanding!</p></div></div>
    <div id="monitorModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-40 transition-opacity duration-300"><div class="bg-white rounded-2xl shadow-lg p-8 max-w-lg w-full text-gray-800 border relative transition-transform duration-300 transform scale-95"><button id="closeMonitorModalBtn" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900 leading-none">&times;</button><h2 class="text-2xl font-bold mb-4">Why a Monitor is Helpful</h2><p class="mb-4 text-gray-700 font-semibold text-base">Having a monitor handy significantly speeds up our call and helps with processes like:</p><ul class="list-disc list-inside space-y-2 text-gray-700 font-semibold text-base"><li>Bringing cameras back online</li><li>Adding new cameras</li><li>Changing time settings</li><li>General system training</li></ul></div></div>
    <div id="trainingModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-40 transition-opacity duration-300"><div class="bg-white rounded-2xl shadow-lg p-8 max-w-lg w-full text-gray-800 border relative transition-transform duration-300 transform scale-95"><button id="closeTrainingModalBtn" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900 leading-none">&times;</button><h2 class="text-2xl font-bold mb-4">Request System Training</h2><p class="mb-4 text-gray-700 font-semibold text-base">To schedule additional training, please contact our Lead Service Technician, Levi, at the number below.</p>
        <div class="text-center bg-gray-100 p-4 rounded-lg">
            <p class="text-2xl font-bold text-gray-800">
                <span class="phone-number" data-number="8326106820">832-610-6820</span>
                <button class="phone-action-btn inline-flex align-middle ml-2">üìû</button>
            </p>
        </div>
        <div class="mt-4 text-base text-gray-700 font-semibold"><p><span class="font-bold">Direct Line:</span> 8am - 5pm, Mon-Fri</p><p><span class="font-bold">On-Call Emergency Line:</span> 8am - 10pm, Every Day</p></div></div></div>
    <div id="alarmPanelModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-40 transition-opacity duration-300"><div class="bg-white rounded-2xl shadow-lg p-8 max-w-lg w-full text-gray-800 border relative transition-transform duration-300 transform scale-95"><button id="closeAlarmPanelModalBtn" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900 leading-none">&times;</button><h2 class="text-2xl font-bold mb-4">Confirm Your Alarm Panel</h2><p class="mb-4 text-gray-700 font-semibold text-base">The following instructions are for the <span class="font-bold">IQ Panel 4</span>, shown below.</p><div class="my-4 p-2 border rounded-lg bg-gray-100"><img src="https://suretyhome.com/wp-content/uploads/bundle-01-iqp4.png" alt="IQ Panel 4" class="rounded-md w-full max-w-xs mx-auto"></div><p class="text-gray-700 font-semibold text-base">If your panel is different, please text a photo of it to <span class="font-bold phone-number" data-number="8326106820">832-610-6820</span><button class="phone-action-btn inline-flex align-middle ml-2">üìû</button> for assistance.</p><div class="mt-6 flex justify-end gap-4"><button id="backFromAlarmModalBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg text-base">Go Back</button><button id="continueToAlarmBtn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg text-base">Continue</button></div></div></div>
    
    <!-- UPS Info Modal -->
    <div id="upsModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-40 transition-opacity duration-300">
        <div class="bg-white rounded-2xl shadow-lg p-8 max-w-lg w-full text-gray-800 border border-gray-200/80 relative transition-transform duration-300 transform scale-95">
            <button id="closeUpsModalBtn" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900 leading-none">&times;</button>
            <h2 class="text-2xl font-bold mb-4">Example Backup Battery (UPS)</h2>
            <p class="mb-4 text-gray-700 font-semibold text-base">A backup battery (UPS) often looks like a small black tower or power strip. Here is an example:</p>
            <div class="my-4 p-2 border rounded-lg bg-gray-100">
                <img src="https://i.ebayimg.com/images/g/rMIAAOSwqQNm2maj/s-l1200.jpg" alt="Backup Battery / UPS" class="rounded-md w-full max-w-xs mx-auto">
            </div>
        </div>
    </div>

    <!-- Alarm Box Info Modal -->
    <div id="alarmBoxModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-40 transition-opacity duration-300">
        <div class="bg-white rounded-2xl shadow-lg p-8 max-w-lg w-full text-gray-800 border border-gray-200/80 relative transition-transform duration-300 transform scale-95">
            <button id="closeAlarmBoxModalBtn" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900 leading-none">&times;</button>
            <h2 class="text-2xl font-bold mb-4">Example Alarm Power Box</h2>
            <p class="mb-4 text-gray-700 font-semibold text-base">The alarm power supply is often a white box plugged into an outlet with two wires. It's critical this box does not lose power.</p>
            <div class="my-4 p-2 border rounded-lg bg-gray-100">
                <img src="https://zionssecurity.com/wp-content/uploads/2022/10/Q9-QR0051840_alt2.jpg" alt="Alarm Power Box" class="rounded-md w-full max-w-xs mx-auto">
            </div>
        </div>
    </div>

    <!-- SN on Phone Modal -->
    <div id="snOnPhoneModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-40 transition-opacity duration-300">
        <div class="bg-white rounded-2xl shadow-lg p-8 max-w-lg w-full text-gray-800 border border-gray-200/80 relative transition-transform duration-300 transform scale-95">
            <button id="closeSnOnPhoneModalBtn" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900 leading-none">&times;</button>
            <h2 class="text-2xl font-bold mb-6">Find Your SN in the DMSS App</h2>
            <div class="space-y-5">
                <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-blue-100 text-blue-600 font-bold text-base mr-4">1</div><p class="text-gray-700 font-semibold text-base">Open the <span class="font-bold">DMSS app</span> and go to the <span class="font-bold">Home</span> page.</p></div>
                <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-blue-100 text-blue-600 font-bold text-base mr-4">2</div><p class="text-gray-700 font-semibold text-base">Find your camera system (e.g., "Home Cameras"). To its right, you will see a play icon, an arrow, and three dots (...).</p></div>
                <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-blue-100 text-blue-600 font-bold text-base mr-4">3</div><p class="text-gray-700 font-semibold text-base">Tap the <span class="font-bold">three dots (...)</span> and select <span class="font-bold">Device Details</span>.</p></div>
                <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-blue-100 text-blue-600 font-bold text-base mr-4">4</div><p class="text-gray-700 font-semibold text-base">Check the status at the top. If it does not say <span class="font-bold text-blue-600">Online</span>, your system is offline.
                        <button id="offlineInfoBtn" class="inline-flex align-middle ml-1">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-blue-600 hover:text-blue-800">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                            </svg>
                        </button>
                    </p>
                </div>
                <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-blue-100 text-blue-600 font-bold text-base mr-4">5</div><p class="text-gray-700 font-semibold text-base">If the status is <span class="font-bold text-blue-600">Online</span>, the <span class="font-bold">Serial Number</span> may be listed here.</p></div>
                <div class="flex items-start"><div class="flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full bg-blue-100 text-blue-600 font-bold text-base mr-4">6</div><p class="text-gray-700 font-semibold text-base">If not, tap the <span class="font-bold">edit icon</span> (pencil & paper) at the top right to find the Serial Number.</p></div>
            </div>
        </div>
    </div>

    <!-- Offline Info Modal -->
    <div id="offlineInfoModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-40 transition-opacity duration-300">
        <div class="bg-white rounded-2xl shadow-lg p-8 max-w-lg w-full text-gray-800 border border-gray-200/80 relative transition-transform duration-300 transform scale-95">
            <button id="closeOfflineInfoModalBtn" class="absolute top-4 right-4 text-2xl text-gray-600 hover:text-gray-900 leading-none">&times;</button>
            <h2 class="text-2xl font-bold mb-4">Camera System Offline</h2>
            <p class="text-gray-700 font-semibold text-base">If your system is showing as "Offline," it is not connected to the internet. Please continue with the troubleshooting steps in this guide (starting from Step 2), as power cycling the system often resolves this issue.</p>
            <p class="mt-2 text-gray-700 font-semibold text-base">If the system is still offline after completing all steps, we will address it during our support call.</p>
        </div>
    </div>

    <!-- Phone Action Pop-up -->
    <div id="phoneActionPopup" class="hidden absolute z-50 bg-white rounded-lg shadow-lg border border-gray-200 text-center">
        <a id="callLink" href="#" class="block px-4 py-2 text-base font-semibold text-blue-600 hover:bg-gray-100 rounded-t-lg">Call</a>
        <a id="textLink" href="#" class="block px-4 py-2 text-base font-semibold text-blue-600 hover:bg-gray-100 rounded-b-lg">Text</a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- CONSTANTS AND ELEMENTS ---
            const views = {
                choice: document.getElementById('choiceView'),
                selfService: document.getElementById('selfServiceView'),
                cameraTroubleshooting: document.getElementById('cameraTroubleshootingView'),
                alarmTroubleshooting: document.getElementById('alarmTroubleshootingView'),
                batteryTutorial: document.getElementById('batteryTutorialView'),
                dmssTutorial: document.getElementById('dmssTutorialView'),
                nvrTutorial: document.getElementById('nvrTutorialView'),
                welcome: document.getElementById('welcomeView'),
                camera: document.getElementById('cameraView'),
                access: document.getElementById('accessControlView'),
                alarmHub: document.getElementById('alarmHubView'),
                panelIssues: document.getElementById('panelIssuesView'),
                sensorIssues: document.getElementById('sensorIssuesView'),
                routerFirmware: document.getElementById('routerFirmwareView'),
            };

            const modals = {
                monitor: { el: document.getElementById('monitorModal'), openBtn: document.getElementById('monitorInfoBtn'), closeBtn: document.getElementById('closeMonitorModalBtn') },
                training: { el: document.getElementById('trainingModal'), openBtn: document.getElementById('trainingBtn'), closeBtn: document.getElementById('closeTrainingModalBtn') },
                ups: { el: document.getElementById('upsModal'), openBtn: document.getElementById('upsInfoBtn'), closeBtn: document.getElementById('closeUpsModalBtn') },
                alarmBox: { el: document.getElementById('alarmBoxModal'), openBtn: document.getElementById('alarmBoxInfoBtn'), closeBtn: document.getElementById('closeAlarmBoxModalBtn') },
                snOnPhone: { el: document.getElementById('snOnPhoneModal'), openBtn: document.getElementById('findOnPhoneBtn'), closeBtn: document.getElementById('closeSnOnPhoneModalBtn') },
                offlineInfo: { el: document.getElementById('offlineInfoModal'), openBtn: document.getElementById('offlineInfoBtn'), closeBtn: document.getElementById('closeOfflineInfoModalBtn') },
                alarmPanel: { el: document.getElementById('alarmPanelModal'), closeBtn: document.getElementById('closeAlarmPanelModalBtn') },
            };
            
            // --- CORE NAVIGATION ---
            const showView = (viewToShow) => {
                if (!viewToShow) return;
                const mainContainer = document.querySelector('main');
                
                mainContainer.classList.add('fade-out-fast');

                mainContainer.addEventListener('transitionend', () => {
                    Object.values(views).forEach(view => {
                        if (view) view.classList.add('hidden');
                    });
                    viewToShow.classList.remove('hidden');
                    mainContainer.classList.remove('fade-out-fast');
                    
                    const viewName = Object.keys(views).find(key => views[key] === viewToShow);
                    if (viewName) {
                        gtag('event', 'page_view', {
                            page_title: viewName.replace(/([A-Z])/g, ' $1').trim(),
                            page_path: `/${viewName}`
                        });
                    }
                    
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, { once: true });
            };

            // --- MODAL LOGIC ---
            const showModal = (modal) => {
                if (modal && modal.el) {
                    modal.el.classList.remove('hidden');
                    setTimeout(() => {
                        const modalContent = modal.el.querySelector('div');
                        if (modalContent) {
                            modalContent.classList.remove('scale-95', 'opacity-0');
                        }
                    }, 20);
                }
            };

            const hideModal = (modal) => {
                if (modal && modal.el) {
                    const modalContent = modal.el.querySelector('div');
                    if (modalContent) {
                        modalContent.classList.add('scale-95', 'opacity-0');
                    }
                    setTimeout(() => {
                        modal.el.classList.add('hidden');
                    }, 300);
                }
            };

            Object.values(modals).forEach(modal => {
                if (modal.openBtn) modal.openBtn.addEventListener('click', () => showModal(modal));
                if (modal.closeBtn) modal.closeBtn.addEventListener('click', () => hideModal(modal));
            });
            
            // --- EVENT LISTENERS ---

            // Main Menu
            document.getElementById('selfServiceBtn')?.addEventListener('click', () => showView(views.selfService));
            document.getElementById('remoteSupportBtn')?.addEventListener('click', () => showView(views.welcome));

            // Welcome View (Prepare for Support)
            document.getElementById('cameraBtn')?.addEventListener('click', () => showView(views.camera));
            document.getElementById('accessBtn')?.addEventListener('click', () => showView(views.access));
            document.getElementById('alarmBtn')?.addEventListener('click', () => showModal(modals.alarmPanel));

            // Self-Service View
            document.getElementById('troubleshootCameraBtn')?.addEventListener('click', () => showView(views.cameraTroubleshooting));
            document.getElementById('troubleshootAlarmBtn')?.addEventListener('click', () => showView(views.alarmTroubleshooting));
            
            // Camera Troubleshooting View
            document.getElementById('dmssTutorialBtn')?.addEventListener('click', () => showView(views.dmssTutorial));
            document.getElementById('nvrTutorialBtn')?.addEventListener('click', () => showView(views.nvrTutorial));

            // Alarm Troubleshooting View
            document.getElementById('batteryTutorialBtn')?.addEventListener('click', () => showView(views.batteryTutorial));
            document.getElementById('panelIssuesBtn')?.addEventListener('click', () => { showView(views.panelIssues); setupStepView('panelIssuesView', 3); });
            document.getElementById('sensorIssuesBtn')?.addEventListener('click', () => { showView(views.sensorIssues); setupStepView('sensorIssuesView', 3); });
            
            // Back Buttons
            document.getElementById('welcomeBackBtn')?.addEventListener('click', () => showView(views.choice));
            document.getElementById('selfServiceBackBtn')?.addEventListener('click', () => showView(views.choice));
            document.getElementById('cameraTroubleshootingBackBtn')?.addEventListener('click', () => showView(views.selfService));
            document.getElementById('alarmTroubleshootingBackBtn')?.addEventListener('click', () => showView(views.selfService));
            document.getElementById('batteryTutorialBackBtn')?.addEventListener('click', () => showView(views.alarmTroubleshooting));
            document.getElementById('dmssTutorialBackBtn')?.addEventListener('click', () => showView(views.cameraTroubleshooting));
            document.getElementById('nvrTutorialBackBtn')?.addEventListener('click', () => showView(views.cameraTroubleshooting));
            document.getElementById('cameraBackBtn')?.addEventListener('click', () => showView(views.welcome));
            document.getElementById('accessBackBtn')?.addEventListener('click', () => showView(views.welcome));
            document.getElementById('alarmHubBackBtn')?.addEventListener('click', () => showView(views.welcome));
            document.getElementById('panelIssuesBackBtn')?.addEventListener('click', () => showView(views.alarmHub));
            document.getElementById('sensorIssuesBackBtn')?.addEventListener('click', () => showView(views.alarmHub));
            document.getElementById('routerFirmwareBackBtn')?.addEventListener('click', () => showView(views.cameraTroubleshooting));

            // Firmware Alert
            const firmwareAlert = document.getElementById('firmwareAlert');
            document.getElementById('closeFirmwareAlert')?.addEventListener('click', () => firmwareAlert.style.display = 'none');
            document.getElementById('firmwareGoBtn')?.addEventListener('click', () => showView(views.routerFirmware));

            // Special Modals
            document.getElementById('continueToAlarmBtn')?.addEventListener('click', () => { hideModal(modals.alarmPanel); showView(views.alarmHub); });
            document.getElementById('backFromAlarmModalBtn')?.addEventListener('click', () => { hideModal(modals.alarmPanel); showView(views.welcome); });
            
            // DMSS Tutorial Toggle
            const monitorToggleBtn = document.getElementById('monitorToggleBtn');
            const nvrWithMonitor = document.getElementById('nvrWithMonitor');
            const nvrWithoutMonitor = document.getElementById('nvrWithoutMonitor');

            if (monitorToggleBtn && nvrWithMonitor && nvrWithoutMonitor) {
                monitorToggleBtn.addEventListener('click', () => {
                    const isMonitorView = nvrWithMonitor.classList.contains('hidden');
                    nvrWithMonitor.classList.toggle('hidden', !isMonitorView);
                    nvrWithoutMonitor.classList.toggle('hidden', isMonitorView);
                    monitorToggleBtn.textContent = isMonitorView ? "I don't have a monitor" : 'I have a monitor';
                    if (isMonitorView) {
                        setupStepView('nvrWithMonitor', 8);
                    } else {
                        setupStepView('nvrWithoutMonitor', 5);
                    }
                });
            }
            
            // --- STEP-BY-STEP TUTORIAL LOGIC ---
            const setupStepView = (viewId, totalSteps) => {
                const view = document.getElementById(viewId);
                if (!view) return;
                const steps = view.querySelectorAll('.step');
                const nextBtns = view.querySelectorAll('.next-btn');
                const prevBtns = view.querySelectorAll('.prev-btn');
                const progressIndicator = document.getElementById(`${viewId.replace('View', '')}Progress`);
                
                let currentStep = 0;

                const updateView = () => {
                    steps.forEach((step, index) => step.classList.toggle('hidden', index !== currentStep));
                    if (progressIndicator) progressIndicator.textContent = `Step ${currentStep + 1} of ${totalSteps}`;
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                };
                
                const markStepComplete = (stepIndex) => {
                    const stepNumberDiv = steps[stepIndex].querySelector('.step-number');
                    if (stepNumberDiv) {
                        stepNumberDiv.innerHTML = `<img src="https://raw.githubusercontent.com/ageintsec-tutorials/ageintsupport/refs/heads/main/checkmark.png" alt="Completed" class="h-8 w-8">`;
                    }
                };
                
                nextBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        if (currentStep < totalSteps - 1) {
                            markStepComplete(currentStep);
                            currentStep++;
                            updateView();
                        }
                    });
                });

                prevBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        if (currentStep > 0) currentStep--;
                        updateView();
                    });
                });
                updateView();
            };
            
            setupStepView('cameraView', 6);
            setupStepView('accessView', 4);
            setupStepView('nvrWithMonitor', 8);
            // setupStepView('nvrWithoutMonitor', 5); // This will be initialized on toggle
            setupStepView('dmssTutorialView', 5);

            // --- PHONE POPUP ---
            const phoneActionPopup = document.getElementById('phoneActionPopup');
            const callLink = document.getElementById('callLink');
            const textLink = document.getElementById('textLink');

            document.querySelectorAll('.phone-action-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const phoneNumber = button.closest('.phone-number-container').dataset.number;
                    callLink.href = `tel:${phoneNumber}`;
                    textLink.href = `sms:${phoneNumber}`;
                    
                    const rect = button.getBoundingClientRect();
                    phoneActionPopup.style.left = `${rect.left + window.scrollX}px`;
                    phoneActionPopup.style.top = `${rect.bottom + window.scrollY}px`;
                    
                    phoneActionPopup.classList.remove('hidden');
                });
            });

            document.addEventListener('click', (e) => {
                if (!phoneActionPopup.contains(e.target) && !e.target.closest('.phone-action-btn')) {
                    phoneActionPopup.classList.add('hidden');
                }
            });

            // --- INITIALIZATION ---
            window.addEventListener('load', () => {
                const mainContent = document.querySelector('main');
                const choiceView = document.getElementById('choiceView');
                if (mainContent && choiceView) {
                    mainContent.classList.remove('opacity-0');
                    choiceView.classList.remove('hidden');
                    
                    gtag('event', 'page_view', {
                        page_title: 'Choice',
                        page_path: '/choice'
                    });
                }
            });

            // --- CAMERA TROUBLESHOOTING TABS ---
            const cameraTabs = document.querySelectorAll('#cameraTabs button');
            const cameraTabContent = document.querySelectorAll('#cameraTabContent > div');

            cameraTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    cameraTabs.forEach(t => t.classList.remove('border-blue-500', 'text-blue-600'));
                    tab.classList.add('border-blue-500', 'text-blue-600');
                    const target = document.querySelector(tab.dataset.tabsTarget);
                    cameraTabContent.forEach(content => content.classList.add('hidden'));
                    if (target) {
                        target.classList.remove('hidden');
                    }
                });
            });
        });
    </script>
</body>
</html>
